## 1、首页

<img src="../assets/4fe583b545cad51d9d5e27785520580.jpg" alt="4fe583b545cad51d9d5e27785520580" style="zoom:80%;" />

<img src="../assets/b9df9d629fb9eff43ef6d7be42f4319.jpg" alt="b9df9d629fb9eff43ef6d7be42f4319" style="zoom:80%;" />

组件化搭建页面，recoil管理公共数据

<img src="../assets/43c6d12d6c167cbab95295a4db58457.jpg" alt="43c6d12d6c167cbab95295a4db58457" style="zoom:80%;" />

弹窗管理

<img src="../assets/5902376885074fd7fdc26c53e682042.jpg" alt="5902376885074fd7fdc26c53e682042" style="zoom:80%;" />

页面结构

<img src="../assets/8de999feec599331484a24857be7566.jpg" alt="8de999feec599331484a24857be7566" style="zoom:80%;" />

JSX使用函数

<img src="../assets/44b1ba5ae63492ba7b546407588ac5b.jpg" alt="44b1ba5ae63492ba7b546407588ac5b" style="zoom:80%;" />

判断也用函数封装

<img src="../assets/5d82703ae30ef5727dca898a41325bd.jpg" alt="5d82703ae30ef5727dca898a41325bd" style="zoom:80%;" />

## 2、设置

首页只有用到和修改数据，不涉及后台接口请求保存每一次修改

设置页面修改数据之后，发送请求，封装方法

<img src="../assets/a59481d509f308f61f6f19ced995b39.jpg" alt="a59481d509f308f61f6f19ced995b39" style="zoom:80%;" />

整体结构

<img src="../assets/76f9cdc67e7a9f02e5c94d94a467cd6.jpg" alt="76f9cdc67e7a9f02e5c94d94a467cd6" style="zoom:80%;" />

<img src="../assets/e86e1e01c714d8ab1c8f1ad23c2bd6f.jpg" alt="e86e1e01c714d8ab1c8f1ad23c2bd6f" style="zoom:80%;" />

具体某一项配置——只有开关

<img src="F:/WeChat%20Files/wxid_s03prdq80ev922/FileStorage/Temp/93571d2dd94e45ec3c93050d13077fe.jpg" alt="93571d2dd94e45ec3c93050d13077fe" style="zoom:80%;" />

<img src="../assets/34b820ab2f716a8f5a9c07eb1818dab.jpg" alt="34b820ab2f716a8f5a9c07eb1818dab" style="zoom:80%;" />

具体配置——有参数配置

<img src="../assets/96260416e712982712308f7b1b2b5a8.jpg" alt="96260416e712982712308f7b1b2b5a8" style="zoom:80%;" />

<img src="../assets/20a4f0023ee5cea2b6fb4e0ab613fed.jpg" alt="20a4f0023ee5cea2b6fb4e0ab613fed" style="zoom:80%;" />

<img src="../assets/4474ac5541836e4669a7f2a4b866a09.jpg" alt="4474ac5541836e4669a7f2a4b866a09" style="zoom:80%;" />

## 3、申请

### 3.1 代发协议

==todo== 请求协议封装成hook，可以给组件用或者外部调用、useReducer管理数据

![77a42c0fa42f41b63afaed349039067](../assets/77a42c0fa42f41b63afaed349039067.jpg)

<img src="../assets/af105fa94324a6c9252a7291703ef66.jpg" alt="af105fa94324a6c9252a7291703ef66" style="zoom:80%;" />

### 3.2 网点选择

```js
const test = [                        
{
    FIRBRN: '100593',
    SECBRN: '',
    BRNNAM: '广州分行',
    BRNTYP: 'D',
    BRNNBR: '120',
    YSTNBR: '100593',
},
{
    FIRBRN: '100593',
    SECBRN: '',
    BRNNAM: '湛江分行',
    BRNTYP: 'O',
    BRNNBR: '759',
    YSTNBR: '109853',
},
{
    FIRBRN: '100593',
    SECBRN: '109853',
    BRNNAM: '湛江霞山支行',
    BRNTYP: 'S',
    BRNNBR: '759521',
    YSTNBR: '114619',
},
{
    FIRBRN: '100593',
    SECBRN: '',
    BRNNAM: '广州分行白云支行',
    BRNTYP: 'S',
    BRNNBR: '120504',
    YSTNBR: '100715',
},
{
    FIRBRN: '100314',
    SECBRN: '',
    BRNNAM: '北京分行',
    BRNTYP: 'D',
    BRNNBR: '110',
    YSTNBR: '100314',
},
{
    FIRBRN: '100314',
    SECBRN: '',
    BRNNAM: '北京分行长安街支行',
    BRNTYP: 'S',
    BRNNBR: '110505',
    YSTNBR: '100404',
},
];
```

<img src="../assets/8e20366b566856428154cbc65295278.jpg" alt="8e20366b566856428154cbc65295278" style="zoom:80%;" />

<img src="../assets/55d9c9568e13d3636e27b45d469e30b.jpg" alt="55d9c9568e13d3636e27b45d469e30b" style="zoom:80%;" />

<img src="../assets/e253066853366a25e4d3b553051064b.jpg" alt="e253066853366a25e4d3b553051064b" style="zoom:80%;" />

<img src="../assets/feafb996b6099d8870e55c66c38bda5.jpg" alt="feafb996b6099d8870e55c66c38bda5" style="zoom:80%;" />

<img src="../assets/a42f92493aea83f5fb58bd10fecd91f.jpg" alt="a42f92493aea83f5fb58bd10fecd91f" style="zoom:80%;" />

<img src="../assets/1eca08abe19c20a89a51e183f57cbd1.jpg" alt="1eca08abe19c20a89a51e183f57cbd1" style="zoom:80%;" />

### 3.3 `useTable`

<img src="../assets/fe048f5934542a025650f3c988cd285.jpg" alt="fe048f5934542a025650f3c988cd285" style="zoom:80%;" />

<img src="../assets/91372deb690eb4353e9c3fdcaa7240c.jpg" alt="91372deb690eb4353e9c3fdcaa7240c" style="zoom:80%;" />

### 3.4 异步轮询

<img src="../assets/4e73113b285a9f0759d98b4fa9e81cb.jpg" alt="4e73113b285a9f0759d98b4fa9e81cb" style="zoom:80%;" />

另一种

<img src="../assets/eaa07acfc3290396ab3f06689b313a1.jpg" alt="eaa07acfc3290396ab3f06689b313a1" style="zoom:80%;" />

<img src="../assets/877989ae90e95b0ea05ce68211faf62.jpg" alt="877989ae90e95b0ea05ce68211faf62" style="zoom:80%;" />

使用

<img src="../assets/deeec156a31e3d1438fa38a9a375f69.jpg" alt="deeec156a31e3d1438fa38a9a375f69" style="zoom:80%;" />

<img src="../assets/e1d2946f3ce3a18f05e0c5df08a45bd.jpg" alt="e1d2946f3ce3a18f05e0c5df08a45bd" style="zoom:80%;" />

### 3.5 导入组件

<img src="../assets/84fbe4f3288b548129d7c5cb08e194e.jpg" alt="84fbe4f3288b548129d7c5cb08e194e" style="zoom:80%;" />

<img src="../assets/94d03935f6210f9bdbf9f5f5c11be13.jpg" alt="94d03935f6210f9bdbf9f5f5c11be13" style="zoom:80%;" />

<img src="../assets/36dba1deb27490b4a6523bb7fdd479f.jpg" alt="36dba1deb27490b4a6523bb7fdd479f" style="zoom:80%;" />

<img src="../assets/69687be137a7361ca1d3ec7820e37a8.jpg" alt="69687be137a7361ca1d3ec7820e37a8" style="zoom:80%;" />

<img src="../assets/081d55eb25baf66226261bd2fe2e384.jpg" alt="081d55eb25baf66226261bd2fe2e384" style="zoom:80%;" />

### 3.6 表单拆分

<img src="../assets/72f167d8e89a280a64028b8c3703e23.jpg" alt="72f167d8e89a280a64028b8c3703e23" style="zoom:80%;" />

## 4、付款

<img src="../assets/b7f4e99ccfb820926745900bd12ef14.jpg" alt="b7f4e99ccfb820926745900bd12ef14" style="zoom:80%;" />

<img src="../assets/e6fb427ffecfe4e74b4ed9acc0e8aa5.jpg" alt="e6fb427ffecfe4e74b4ed9acc0e8aa5" style="zoom:80%;" />

<img src="../assets/5afb303f3fe2d059588b234fd093f14.jpg" alt="5afb303f3fe2d059588b234fd093f14" style="zoom:80%;" />

实现

短信

<img src="../assets/4f38b7c0c29b52500102ede6d30e240.jpg" alt="4f38b7c0c29b52500102ede6d30e240" style="zoom:80%;" />

<img src="../assets/389a8c890ad841a459f29becc3175d8.jpg" alt="389a8c890ad841a459f29becc3175d8" style="zoom:80%;" />

<img src="../assets/2a19e47f557c99064d73025f426925a.jpg" alt="2a19e47f557c99064d73025f426925a" style="zoom:80%;" />

扫码

<img src="../assets/c5690227960e5793fc793a9bbf48cfe.jpg" alt="c5690227960e5793fc793a9bbf48cfe" style="zoom:80%;" />

<img src="../assets/3bd975df986d8c5b780aa4c556eb8f5.jpg" alt="3bd975df986d8c5b780aa4c556eb8f5" style="zoom:80%;" />

<img src="../assets/d86130e5f8e69ee692f53819192c1bd.jpg" alt="d86130e5f8e69ee692f53819192c1bd" style="zoom:80%;" />

<img src="../assets/79b63790f9f9a06703de778a68c912f.jpg" alt="79b63790f9f9a06703de778a68c912f" style="zoom:80%;" />

<img src="../assets/e3a7fe249d8cf9c65267317f6b9bc81.jpg" alt="e3a7fe249d8cf9c65267317f6b9bc81" style="zoom:80%;" />

<img src="../assets/03c58e7bcee7eb5e76a0b98dd786fc6.jpg" alt="03c58e7bcee7eb5e76a0b98dd786fc6" style="zoom:80%;" />

<img src="../assets/c0893d7f642c0e1f7ab281075d453a7.jpg" alt="c0893d7f642c0e1f7ab281075d453a7" style="zoom:80%;" />

<img src="../assets/cf09ae884e0ce1798ebc0a8bf72d541.jpg" alt="cf09ae884e0ce1798ebc0a8bf72d541" style="zoom:80%;" />

<img src="../assets/19cf976ed36e6ebecf0e9204fd74936.jpg" alt="19cf976ed36e6ebecf0e9204fd74936" style="zoom:80%;" />

<img src="../assets/d92b4b57bc58e8f97ad8d82729e7d76.jpg" alt="d92b4b57bc58e8f97ad8d82729e7d76" style="zoom:80%;" />

具体实现

支付组件

<img src="../assets/40de0a04500464be728554bf432428c.jpg" alt="40de0a04500464be728554bf432428c" style="zoom:80%;" />

<img src="../assets/09a6bfc3eca4ab7a3f3c92bb6c7bcd3.jpg" alt="09a6bfc3eca4ab7a3f3c92bb6c7bcd3" style="zoom:80%;" />

<img src="../assets/a1ebc822d76e12d6ae1b27264d3c95a.jpg" alt="a1ebc822d76e12d6ae1b27264d3c95a" style="zoom:80%;" />

<img src="../assets/50337768f422e98f35ceedc547ebcac.jpg" alt="50337768f422e98f35ceedc547ebcac" style="zoom:80%;" />

身份校验组件

<img src="../assets/6a244a3d32ed33f6fd994190fe59dd2.jpg" alt="6a244a3d32ed33f6fd994190fe59dd2" style="zoom:80%;" />

<img src="../assets/9cd8a9cd1d46a40cd626aef0c60cff1.jpg" alt="9cd8a9cd1d46a40cd626aef0c60cff1" style="zoom:80%;" />

短信

<img src="../assets/72f18b37e79474be3fc863c077f0b34.jpg" alt="72f18b37e79474be3fc863c077f0b34" style="zoom:80%;" />

<img src="../assets/053026568421ae55d6f8cbc7179b4af.jpg" alt="053026568421ae55d6f8cbc7179b4af" style="zoom:80%;" />

<img src="../assets/a84a589afc5f21ba4520bcb9203f4cb.jpg" alt="a84a589afc5f21ba4520bcb9203f4cb" style="zoom:80%;" />

扫码

<img src="../assets/b24ed76406db7afc232d074836be612.jpg" alt="b24ed76406db7afc232d074836be612" style="zoom:80%;" />

<img src="../assets/fbf9d4ccfb3acd14cb220814080d784.jpg" alt="fbf9d4ccfb3acd14cb220814080d784" style="zoom:80%;" />

<img src="../assets/8117ad8c7d37e903a81b8f0235c73da.jpg" alt="8117ad8c7d37e903a81b8f0235c73da" style="zoom:80%;" />

短信+扫码

<img src="../assets/3874239cc8b25ac19f5b6cf600cbade.jpg" alt="3874239cc8b25ac19f5b6cf600cbade" style="zoom:80%;" />

## 5、微前端

<img src="../assets/f0624ef166be85a7be21e630222aa04.jpg" alt="f0624ef166be85a7be21e630222aa04" style="zoom:80%;" />

<img src="../assets/f200d914a3ac1dff1491c6fba6682ad.jpg" alt="f200d914a3ac1dff1491c6fba6682ad" style="zoom:80%;" />

<img src="../assets/104adce2ee28cbfcacdb79e7077334d.jpg" alt="104adce2ee28cbfcacdb79e7077334d" style="zoom:80%;" />

## 6、Node

### 6.1 angular表格转column

输入

<img src="../assets/738fda63b33c541097f3ca85b11844a.jpg" alt="738fda63b33c541097f3ca85b11844a" style="zoom:80%;" />

输出

<img src="../assets/adf75bca30835262e21c802f63d5b6e.jpg" alt="adf75bca30835262e21c802f63d5b6e" style="zoom:80%;" />

实现

<img src="../assets/f1c09d45f1a27475ba7f3f24ebd78b9.jpg" alt="f1c09d45f1a27475ba7f3f24ebd78b9" style="zoom:80%;" />

<img src="../assets/f39a70120fe948ff4fa6c8c8e41b936.jpg" alt="f39a70120fe948ff4fa6c8c8e41b936" style="zoom:80%;" />

<img src="../assets/924b039c4275afcee7cc48eed943430.jpg" alt="924b039c4275afcee7cc48eed943430" style="zoom:80%;" />

<img src="../assets/e2013aa8bb9d7126fc659358d48af28.jpg" alt="e2013aa8bb9d7126fc659358d48af28" style="zoom:80%;" />

<img src="../assets/15dcedf7d0ece669210972f0f19dc2b.jpg" alt="15dcedf7d0ece669210972f0f19dc2b" style="zoom:80%;" />

### 6.2 后台接口`Api`生产TS

<img src="../assets/9c21548b429ae8976f5bb99791655d2.jpg" alt="9c21548b429ae8976f5bb99791655d2" style="zoom:80%;" />

```js
{
    "tags": [
        {
            "name": "OpenApi代发资金交易业务接口",
            "description": "Agent Special Account Pdf Controller"
        },
    ],
    "paths": {
        "/api/agent-specical-account/transaction/generate-pdf": {
            "post": {
                "tags": [
                    "OpenApi代发资金交易业务接口"
                ],
                "summary": "OpenApi生成代发资金交易清单记账凭证",
                "operationId": "generateAgentReceiptPdfUsingPOST",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "*/*"
                ],
                "parameters": [
                    {
                        "in": "body",
                        "name": "agentSpecialAccountPdfDTO",
                        "description": "agentSpecialAccountPdfDTO",
                        "required": true,
                        "schema": {
                            "originalRef": "api生成代发资金交易清单记账凭证请求参数",
                            "$ref": "#/definitions/api生成代发资金交易清单记账凭证请求参数"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "originalRef": "api生成代发资金交易清单记账凭证响应参数",
                            "$ref": "#/definitions/api生成代发资金交易清单记账凭证响应参数"
                        }
                    },
                },
                "deprecated": false
            }
        },
    },
    "definitions": {
        "api生成代发资金交易清单记账凭证响应参数": {
            "type": "object",
            "properties": {
                "redisKeyList": {
                    "type": "array",
                    "description": "REDIS的key",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "title": "api生成代发资金交易清单记账凭证响应参数"
        },
        "api生成代发资金交易清单记账凭证请求参数": {
            "type": "object",
            "properties": {
                "beginDate": {
                    "type": "string",
                    "format": "date",
                    "description": "起始交易日期"
                },
                "endDate": {
                    "type": "string",
                    "format": "date",
                    "description": "截止交易日期"
                },
                "usage": {
                    "type": "string",
                    "description": "用途"
                }
            },
            "title": "api生成代发资金交易清单记账凭证请求参数"
        },
    }
}
```

<img src="../assets/5ed17d3794cd49ff2ff5e5ddb99f7c6.jpg" alt="5ed17d3794cd49ff2ff5e5ddb99f7c6" style="zoom:80%;" />

<img src="../assets/53d79b2be1da16d6f4ae792c4d304f9.jpg" alt="53d79b2be1da16d6f4ae792c4d304f9" style="zoom:80%;" />

<img src="../assets/9e32b83070069992912bc2e71b6dcb1.jpg" alt="9e32b83070069992912bc2e71b6dcb1" style="zoom:80%;" />

实现

<img src="../assets/7d9a013ef393fc2be329dc74d5832fc.jpg" alt="7d9a013ef393fc2be329dc74d5832fc" style="zoom:80%;" />

<img src="../assets/8a4cb625ec72c595c23846707e10005.jpg" alt="8a4cb625ec72c595c23846707e10005" style="zoom:80%;" />

<img src="../assets/119303c70e3bf9c011985e135d08b98.jpg" alt="119303c70e3bf9c011985e135d08b98" style="zoom:80%;" />

<img src="../assets/64f6908f74356ba668ddc387ab419cc.jpg" alt="64f6908f74356ba668ddc387ab419cc" style="zoom:80%;" />

<img src="../assets/b959c1bf721b9e0a86b1cc9e1aaf6e1.jpg" alt="b959c1bf721b9e0a86b1cc9e1aaf6e1" style="zoom:80%;" />

### 6.3 other

基于 meow 和 cli-meow-help 的脚手架工具，通过命令行快速创建 react 中的 class/函数式组件


使用Webpack分析工具webpack-bundle-analyzer对Chunk文件进一步分析

Ahooks提供了两个性能分析钩子：useTrackedEffect和useWhyDidYouUpdate可以帮助我们定位到状态的变更，从而让我们判断如何去减少组件的更新次数，实际工作中useWhyDidYouUpdate我使用的比较多。

## 7、代发业务

<img src="../assets/51045649050b202b61de897da222c58.jpg" alt="51045649050b202b61de897da222c58" style="zoom:80%;" />

<img src="../assets/1e853059f3b6006727334dc68d96304.jpg" alt="1e853059f3b6006727334dc68d96304" style="zoom:80%;" />

<img src="../assets/b9ae13a3fb5cb15f9dc8e7283d1a45e.jpg" alt="b9ae13a3fb5cb15f9dc8e7283d1a45e" style="zoom:80%;" />

<img src="../assets/bde44ea137b1f5b00773761ae1dd528.jpg" alt="bde44ea137b1f5b00773761ae1dd528" style="zoom:80%;" />

**系统与版本**
 - 薪福通PC客户端 
 - 掌上薪福通APP 
 - 薪福通Web端

**数据**
- 注册企业数90w
- 月活企业数10w
- 代发月活企业数6w
- 工资卡月活企业数1w
 - 
**五步入门薪福通**
1. 实名认证
	- 招商银行手机银行App
	- 人工审核
2. 创建并认证企业
	- 具有营业执照的企业需要提供18位统一社会信用代码、营业执照、法定代表人身份证件
	- 创建企业的账号默认成为该企业的管理员
	- 默认拥有所有的功能权限、数据权限，并可配置普通用户的功能权限、数据权限
	- “我的企业-变更管理员”主动提交变更管理员申请，不用提交任何资料
3. 企业初始化设置
	- 【创建组织架构】
	- 【邀请成员加入企业】手机号/二维码
4. 完成权限配置
	- 功能权限
	- 数据权限
5. 导入员工信息

**薪福通代发是什么**
 - 从员工角度看，代发就是工资、报销、补贴入账了
 - 从企业角度看，代发就是把员工工资、报销、补贴从企业对公户（专户、对公钱包）转到了个人账户/数字人民币钱包

**薪资代发前准备**
柜面侧准备
 - 签订代发协议，**代发协议包括有对公户协议、客户号协议、母子协议等**。
 	- 母子授权：母公司把协议分配给子公司用。每个子公司不用签订代发协议。
 	- 协议授权：子公司把协议授权给母公司，母公司进行代发。
 - 申请资金用户，签订代发协议之后，由企业经办人携带加盖单位公章的《“薪福通薪资代发”服务申请表》以及有效身份证件在柜面申请薪福通薪资代发资金用户，**资金用户是代发过程中走付款流程用户**。
系统侧准备
 - 注册薪福通完成企业认证
 - 通用审批流程设置
 - 薪资代发基础设置
	- 开户白名单校验
	- 自动开户
	- 代发申请Ukey校验
	- 薪资代发明细验重设置
	- 薪资代发审批有效期
	- 薪资代发审批Ukey校验
	- 员工信息校验
	- 薪资代发付款校验方式
	- 付款账号加密（脱敏）显示
	- 通知设置
	- 修改关联模块推送代发明细
	- 网点打印对账单审批
- 其他设置
	- 在「薪资代发-设置-代发资金退款设置」可设置针对唯一资金来源的协议立账内部户资金的退款规则
	- 在「薪资代发-设置-代发限额设置」，开启对代发金额进行的限制
	- 付款安全设置是资金用户才有的功能，可以在此进行关闭权限、修改密码、重置密码
	- 可在「薪资代发-设置-基础设置」中的员工信息校验中设置来自“收款账户管理”的校验。设置后在代发申请时，将比对收款账户管理中记录的数据。
	- 代发用户是在招行柜台开通了付款或领取代发明细对账单权限的用户。若新增企业用户，需前往招行柜台办理。

**代发申请**
用户可在此页面中进行代发申请。在此页面可查询到本人提交的代发申请及待提交、已撤销等状态的代发业务，可对相关业务进行修改、作废、重新申请、经办等操作。可对列表进行导出操作。
系统支持按用户、按账号、按来源、代发明细、用途、按协议六个维度，限制用户查看明细对账单的数据权限，可在「管理后台-通用权限管理-用户授权」中进行设置。
通过薪福通智能费控、智能算薪、电子工资单等关联模块推送的代发数据，需要在「薪资代发-代发申请」中对相关数据进行经办，以发起代发申请业务。

 - 进入新增申请流程
 	- 当企业申请超过一万笔明细的代发时，建议使用大量代发提高代发效率。大量代发现支持最多10万笔明细的代发申请
 	- 多批次代发，即一次同时申请多个批次代发。在进行多批次代发时，所用的代发协议需均由同一公司签署。
 	- 商务卡代发功能提供给使用招行商务卡的企业向商务卡发放报销款，企业无需收集员工个人商务卡号只需使用商务卡账户号即可代发。该功能现需申请白名单使用。
 	- 企业可根据实际情况签订相应协议申请在薪福通进行数字人民币代发。具体详见《薪资代发操作手册-数字人民币版》
 - 填写代发信息
 	- 当对公账户存在终止非柜面、中止所有、开户初期不允许线上办理业务、监管户、久悬户等管控措施，将无法进行代发。对公户签约的代发协议做了协议立账，但对公户本身存在上述情况，也将受到影响
 	- 上传文件智能匹配字段
 - 核对代发明细
 - 提交
 - 查询及后续操作
 	- 代发明细对账单功能可根据协议查询一段时间内的代发明细，并打印/下载带有招行电子印章的明细对账单。
 	- 代发资金查询：通过协议立账的代发专户（下称“代发专户”）进行代发的客户，可在本功能中查询、导出代发专户的可用余额、交易明细、退款记录，亦可再次进行线上退款（仅支持资金来源唯一的账户，若有多个资金来源需要到柜台办理退款）。

一般户可以用薪福通薪资代发吗？
1.招商银行一般户使用薪福通代发其它，只用约定资金用户；
2.**招商银行一般户代发工资/奖金，需要协议立账，约定资金来源必须是基本户**；
3.非招商银行一般户使用薪福通代发，需要协议立账。
注：当协议类型为代发工资/奖金时，资金来源户口仅可为企业基本户

银企互联
- 企业网银
- 云直联是轻量级的银企直联方案，摆脱对物理UKey的依赖。
- CBS为集团企业提供资金管理、财资管理、现金管理系统、提供**跨行账户**管理服务

通用能力
- 人
	- 薪资代发
		- 银行卡管理
		- 薪资代发
		- 智能算薪
		- 个税服务
		- 电子工资单
	- 人事服务
		- 组织管理
		- 员工管理
		- 假勤管理
	- 团体福利
		- 企业红包
		- 企业福利
		- 企业团险
- 财
	- 智能财务
		- 智能记账
		- 会计引擎
		- 资产管理
	- 智能费控
		- 员工报销
		- 对公报账
		- 费用管控
		- 发票管理
- 事
	- 协同办公
		- OA审批
		- 智能报表

1、代发协议
梳理使用场景，建立功能脑图，按照功能拆分组件，不同场景组合不同组件 ==todo==
- 代发协议父组件
- 用途
- 付款账号
- 协议详情
- 账号限额

企业需要代发需要和银行签订代发协议
对于集团代发，有母子协议、协议授权

 - 代发协议是按照公司分层的树结构 
 - 代发协议会带出用途和付款账号选择，如果用途和付款账号只有一项，选择协议时默认选中
 - 代发协议会带出协议详情和账号限额
 - 代发协议刷新
 - 监管户控制

getAgreement
- 局部loading设置为true
- 过期/关闭、未授权协议打标，后台返回对应标志
- 如果协议只有一个用途，则将用途加到协议类型后面，判断后台返回用途数组长度
- 代发申请不显示过期的协议
- 有授权有子协议的需要分组，没有的直接平铺，后台返回对应标志。
```js
const com = [];
agreeList.forEach((item) => {
  const {info} = item;
  let hasCom = com.find((ele) => {info.name === ele.title});
  if (!hasCom) {
    hasCom = {
       title: info.name,
       value: info.name,
       children: [],
       disabled: true,
    }
    com.push(hasCom);
  }
  hasCom.push(item);
})
```
- 第一次初始化时（外部传入），若传入协议号，则在协议列表中找到相应协议号才赋值
- 如果只有一个协议，则自动选择
```js
// 第一次初始化时，若传入协议号，则在协议列表中找到相应协议号才赋值
 if (init && number) {
     if (agreeList.some((item: any) => item.No === number)) {
         form.setFieldsValue({ agree: number});
         agreeChange(number, use, account);
     }
 } else if (agreementList.length === 1) {
     // 如果只有一个协议，则自动选择
     form.setFieldsValue({ agree: agreeList[0].value });
     // 主动触发选择事件
     handleAgreementChange(agreeList[0].value);
 }
```
- 局部loading设置为