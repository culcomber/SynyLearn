## 1、需求分析

### 1.1 项目结构

- 前端 (SPA 项目，使用 Vue 或者 React) --> lego
  - 编辑器(lego-editor)
  - 其他页面(lego-pages)
- 后端 --> lego-backend
  - RESTful API
  - H5 页面 SSR(Server side rendering)
- 组件库 --> lego-components

==其他页面 nest ssr==

<img src="../../assets/image-20240221223754924.png" alt="image-20240221223754924" style="zoom:50%;" />

### 1.2 项目难点

海报的组成

- 背景，由图片或者纯色组成
- 元素
  - 由各种不同的元素(组件) 组成
  - 一部分属性界定它的位置 (position)
  - 一部分属性界定它的展示 (looks)

数据结构设计

- 向画布添加组件或者删除组件(向components 数组添加或者删除特定的组件）

- 更新组件的某个属性(找到对应的 component，然后更新它的 props

- 渲染画布或者作品(循环保存的作品信息，使用每个组件特定的属性进行渲染)

扩展性-场景设计，不要关注细节，技术方案设计，为的就是寻找一个方向，论证:可行性、扩展性、复杂度高低

- 海报添加对应的背景音乐
- 新的组件类型-比如说当前日期

<img src="../../assets/image-20240221224150272.png" alt="image-20240221224150272" style="zoom:40%;" />

<img src="../../assets/image-20240221224224828.png" alt="image-20240221224224828" style="zoom:50%;" />

### 1.3 研发流程优化

<img src="../../assets/image-20240221230530456.png" alt="image-20240221230530456" style="zoom:50%;" />

**开发模式**

<img src="../../assets/image-20240222231318438.png" alt="image-20240222231318438" style="zoom:70%;" />

**前端监控体系**

前端监控的三个阶段

- 初阶:使用第三方平台，百度、友盟、阿里云ARMS等
- 中阶:自研前端监控库，缺乏完整的监控体系
- 高阶:自研前端监控平台，具备完整的监控体系

前端监控的数据作用

- 流量数据监控，如:PV、UV、点击率、页面停留时长等
- 自定义事件监控，如:曝光事件、滑动事件、请求事件等
- 交易指标监控，如:成交额、转化率等
- 其他综合分析，如:用户画像分析、流量漏斗、销量预测等

**项目测试体系**

前端项目测试

- 测试同学:功能测试，性能测试，测试用例
- 前端同学:单元测试，常用于组件库、API等(Jest、Mocha)

上线项目测试

- 测试同学回归
- 利用前端监控，进行监控项目稳定性和性能，并上报前端日志
  - 稳定性:如iserror、白屏检测等
  - 性能:如秒开率、首屏渲染时长、接口请求时长等
  - 前端日志:如console.log、API请求记录等

**前端发布体系**

利用脚手架统一管理发布阶段

- 利用脚手架做发布的优势
  - 规范:利用统一发布规范，如commit记录、分支名称、代码规范等
  - 效率:避免大量重复操作，浪费开发时间
  - 安全:构建和发布全部在云端操作，避免个人发布时带来的安全隐患
- 脚手架发布的流程
  - GitFlow自动化代码提交
  - 远程代码自动检查
  - 云端完成构建与发布操作

<img src="../../assets/image-20240222231938880.png" alt="image-20240222231938880" style="zoom:80%;" />

<img src="../../assets/image-20240222232403759.png" alt="image-20240222232403759" style="zoom:100%;" />

## 2、脚手架架构设计和框架搭建

将收获什么
。脚手架的实现原理
。Lerna的常见用法
。架构设计技巧和架构图绘制方法
主要内容
。学习如何以架构师的角度思考基础架构问题
。多Package项目管理痛点和解决方案，基于Lerna脚手架框架搭建
。imooc-cli脚手架需求分析和架构设计，架构设计图
附赠内容
。脚手架调试技巧
。Lerna源码分析
。Node的module模块分析
。yargs使用方法
。剖析Lerna架构设计
关键词
。脚手架-掌握脚手架原理和开发全流程
。Lerna-解决多Package项目管理痛点
。架构设计-学习大厂基础架构设计思路
学习方法
。架构三部曲: 掌握原理 -> 独立思考 -> 总结反思
。深度剖析优秀开源项目，由表及里，由浅入深
。视角切换:多切换到架构师视角，从全局思考问题

### 2.1 脚手架开发入门

#### 2.1.1 脚手架的必要性



2.1.2 什么是脚手架



2.1.3 脚手架的实现原理

2.1.4 脚手架的开发流程



2.2 脚手架框架搭建



2.3 脚手架架构设计

